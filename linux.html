<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Lyon's Blog</title>
	<meta name="description" content="">
	<meta name="author" content="zhang liyong">

	<!-- HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="./theme/html5.js"></script>
	<![endif]-->

	<!-- Styles -->
	<link href="./theme/bootstrap.min.css" rel="stylesheet">
	<link href="./theme/local.css" rel="stylesheet">
	<link href="./theme/pygments.css" rel="stylesheet">

    <!-- Feeds -->
        
		</head>
<body>
			<div class="topbar">
	  <div class="topbar-inner">
		<div class="container-fluid">
		  <a class="brand" href="./">Lyon's Blog</a>
			<ul class="nav">
																			<li><a href="./pages/about.html">About</a></li>
																		<li ><a href="./category/algorithm.html">algorithm</a></li>
									<li ><a href="./category/bash.html">bash</a></li>
									<li ><a href="./category/db.html">db</a></li>
									<li ><a href="./category/emacs.html">emacs</a></li>
									<li ><a href="./category/git.html">git</a></li>
									<li class="active"><a href="./category/linux.html">linux</a></li>
									<li ><a href="./category/misc.html">misc</a></li>
									<li ><a href="./category/mongo.html">mongo</a></li>
									<li ><a href="./category/munin.html">munin</a></li>
									<li ><a href="./category/mysql.html">mysql</a></li>
									<li ><a href="./category/network.html">network</a></li>
									<li ><a href="./category/nginx.html">nginx</a></li>
									<li ><a href="./category/python.html">python</a></li>
									<li ><a href="./category/vim.html">vim</a></li>
							</ul>
			<p class="pull-right"><a href="./archives.html">[archives]</a> <a href="./tags.html">[tags]</a></p>
		</div>
	  </div>
	</div>

	<div class="container-fluid">
	  <div class="sidebar">
		<div class="well">
			<h3>Blogroll</h3>
			<ul>
								<li><a href="http://docs.notmyidea.org/alexis/pelican/">Pelican</a></li>
								<li><a href="http://python.org">Python.org</a></li>
								<li><a href="http://jinja.pocoo.org">Jinja2</a></li>
								<li><a href="#">You can modify those links in your config file</a></li>
							</ul>
			<div class="social">
			<h3>Social</h3>
			<ul>
								<li><a href="#">You can add links in your config file</a></li>
								<li><a href="#">Another social link</a></li>
							</ul>
			</div>
		</div>
	  </div>
	  <div class="content">
							<div class='article'>
		<div class="page-header"><h1>Linux</h1></div>
		<div class="well small">Permalink: <a class="more" href="./linux.html">2013-05-16 12:18:32</a>
by <a class="url fn" href="./author/zhang-liyong.html">zhang liyong </a>
 in <a href="./category/linux.html">linux</a>
</div>
		<div><h2>Linux TCP Performance Tuning</h2>
<p>There are two ways to change tcp parameters.</p>
<ol>
<li>
<p>change the value of parameter files in /proc/sys/net/
   e.g. increase the value of somaxconn
        <code>echo 1024 &gt; /proc/sys/net/core/somaxconn</code>
   when the server restart, the parameter will restore.</p>
</li>
<li>
<p>change the vlaue in /etc/sysctl.con, and run <code>sudo sysctl -p</code> to apply the changes immediately,
   this can change the value permanently.</p>
</li>
</ol>
<h3>Parameters</h3>
<ul>
<li>/proc/sys/fs/file-max: The maximum number of concurrently open files.</li>
<li>/proc/sys/net/ipv4/tcp_max_syn_backlog: Maximum number of remembered connection requests, which are still did not receive an acknowledgment from connecting client. The default value is 1024 for systems with more than 128Mb of memory, and 128 for low memory machines. If server suffers of overload, try to increase this number.</li>
<li>/proc/sys/net/core/somaxconn: Limit of socket listen() backlog, known in userspace as SOMAXCONN. Defaults to 128. The value should be raised substantially to support bursts of request. For example, to support a burst of 1024 requests, set somaxconn to 1024.</li>
</ul>
<p>change userlevel file-max
need logout and login to work</p></div>
		<div>
			<h2>Comments</h2>
		 									<div>
	</div>	
		<footer>
		  <p>Powered by <a href="http://getpelican.com/">Pelican</a>. Theme based on <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a>.</p>
		  <p>&copy; zhang liyong</p>
		</footer>
	  </div>

	</div>
</body>
</html>